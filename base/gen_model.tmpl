// FILE: model/{{snakeCase .ID}}.go
// Code generated by apigen. DO NOT EDIT.
// GENERATED: {{now}}

package {{.Package}}

import (
	"database/sql"
	"encoding/json"
	"time"
	"hanoman.co.id/bsn/mwui-api/util"
	"hanoman.co.id/bsn/mwui-api/util/jsql"
)

{{- if eq .ID "User" }}
// swagger: model {{.ID}}Ref
type {{.ID}}Ref struct {
  {{- range .Fields }}
    {{- if eq .Type "many-to-many" "many-to-one" "password" "secret"}}
    {{- else}}
	  {{.ID}}       {{.GoType}}   `json:"{{.Name}}"`
    {{- end}}
  {{- end}}
}
{{- end}}

// swagger: model {{.ID}}
type {{.ID}} struct {
  {{- range .Fields }}
    {{- if and (eq .Type "many-to-one") (eq .Ref "User") }}
	  {{.ID}}       *UserRef   `json:"{{.Name}}"`
    {{- else}}
	  {{.ID}}       {{.GoType}}   `json:"{{.Name}}"`
    {{- end}}
  {{- end}}
}

type {{.ID}}Field string

const (
	{{range .Fields -}}
	{{.Model.ID}}Field_{{.ID}}       {{.Model.ID}}Field = "{{.Name}}"
	{{end}}
)

// swagger: model {{.ID}}Sorting
type {{.ID}}Sorting struct {
	Field {{.ID}}Field  `json:"field"`
	Dir   SortDir         `json:"dir"`
}

// swagger: model {{.ID}}Filter
type {{.ID}}Filter struct {
	Field {{.ID}}Field  `json:"field"`
	Op    FilterOp   `json:"op"`
	Value json.RawMessage `json:"value"`
}

{{range .Fields }}{{if eq .Type "password" -}}
func (m *{{.Model.ID}}) Verify{{.ID}}(value string) (bool, error) {
  return util.VerifyPassword(value, m.{{.ID}})
}
{{end}}{{end -}}

