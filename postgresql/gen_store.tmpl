// FILE: model/{{snakeCase .ID}}_store.go
// Code generated by apigen. DO NOT EDIT.
// GENERATED: {{now}}

{{template "StoreInterface" .}}

{{define "CreateReturning" -}}
  {{""}} RETURNING
  {{- range .Fields }}{{ if .IsPk -}}
    {{" "}}{{.Field}}
  {{- end}}{{end}}
{{- end -}}

{{define "CreateExec" -}}
  err = tx.QueryRowContext(ctx, qry,
   {{- range .Fields -}}{{$f := . -}}
      {{- if eq .Type "autoincrement" -}}
      {{- else if eq .Type "many-to-many" }}
      {{- else if eq .Type "many-to-one" }}{{$fb := . }}
        {{- range .RefKeys}}
          {{- "\n    "}}obj{{$f.ID}}_{{.Ref.ID}},
        {{- end}}
      {{-  else }}
        {{- "\n    "}}obj.{{.ID}},
      {{- end}}
    {{- end}}
  ).Scan(
    {{- range .Fields }}{{if .IsPk }}
      &obj.{{.ID}},
    {{- end}}{{end}}
  )
  if err != nil {
		slog.Error("Insert", "qry:", qry, "Error:", err)
    return nil, err
  }
{{- end -}}

{{template "StoreImpl" .}}
